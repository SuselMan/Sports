# Трекер силовых тренировок
Репозиторий `git@github.com:SuselMan/Sports.git`

## Краткое описание:
Проект представляет из себя веб приложение (mobile first) + backend для записи силовых тренировок и отслеживания прогресса. Моя основная потребность как пользователя — зайти в приложение и просматривать историю упражнений и свой прогресс.

## Экраны
Разделим приложения на экраны (категории) отдельно опишем каждый экран, а потом отдельно опишем навигацию по приложению.

### Home (главный экран)
1) Компонент: MuscleMap (карта мышц человека). Силуэт человека спереди и сзади (если пользователь мужчина — силуэт мужчины, если женщина — силуэт женщины). В зависимости от добавленных за текущий день тренировок мышцы на карте подсвечиваются. 
2) Компонент: DateButton — по умолчанию отображается сегодняшняя дата. При нажатии открывается календарь, где можно выбрать дату или диапазон дат. Плюс стрелки влево/вправо для переключения на предыдущий/следующий аналогичный диапазон.
3) Компонент: ExerciseList — показывает список добавленных записей за выбранный диапазон. 
4) Компонент: AddButton — кнопка «+», при нажатии открывается экран MetricForm.

exercises/records
### Metrics 
1) Компонент: DateButton — по умолчанию отображается сегодняшняя дата. При нажатии открывается календарь, где можно выбрать дату или диапазон дат. Плюс стрелки влево/вправо для переключения на предыдущий/следующий аналогичный диапазон.
2) Компонент: MetricsList — список добавленных метрик за выбранный период.
3) Компонент: AddButton — кнопка «+», при нажатии открывается экран MetricForm.

### Statistics (Статистика)
1) Компонент с табами (UI Kitten) — можно выбрать два варианта: Metrics и Exercises.

#### Если выбрано Metrics
2) Компонент: DateButton — по умолчанию отображается сегодняшняя дата. При нажатии открывается календарь, где можно выбрать дату или диапазон дат. Плюс стрелки влево/вправо для переключения на предыдущий/следующий аналогичный диапазон.
3) Компонент: выпадающий список с поиском — отображает список метрик, можно выбрать одну.
4) График изменений (прогресса) за выбранный период дат.

#### Если выбрано Exercises

2) Компонент: DateButton — по умолчанию отображается сегодняшняя дата. При нажатии открывается календарь, где можно выбрать дату или диапазон дат. Плюс стрелки влево/вправо для переключения на предыдущий/следующий аналогичный диапазон.
3) Компонент: выпадающий список с поиском — отображает список упражнений, можно выбрать одно.
4) График изменений общего количества повторений за подход.
5) График веса на упражнении. 
6) График количества подходов в день.

### Exercises
  1) список созданых упражнений
  2) Компонент: AddButton — кнопка «+», при нажатии открывается экран ExerciseForm.
  3) ExerciseForm - можалка для создания  нового упраднения тип Exercise

### Login/SignUp
Вход в приложение, только через гугл.
1) Кнопка login with google

### Introducing
Экран, который показываем только при первом входе. Просим пользователя указать пол и возраст. Можно пропустить. 

### Settings
Экран настроек: можно поменять пол пользователя и возраст, выбрать дневную тему или ночную (или system default).


## Стек
Frontend: typescript (strict mode), react, ant.design, axios, zustand, lodash, dayjs, react-device-detect
Backend: nodejs, typescript (strict mode), mongo (mongoose), express

Я хочу, чтобы проект был единым целым, поэтому предлагаю описывать TS-типы в общей `shared`-папке/пакете, где будут типы, используемые и в BE, и в FE. Это обеспечит хорошую совместимость типов.

Поднимать бекенд будем на моей VPS с Debian с подключением через SSH. Нужно сразу настроить GitHub Actions, чтобы он клонировал и деплоил проект там. Сделать в проекте `.env` с ключами и добавить его в `.gitignore`; секреты хранить в GitHub Secrets.

## Технические решения и контракты API

- Сущности per-user:
  - Exercise и Metric являются пользовательскими сущностями (каждый пользователь может иметь собственные упражнения и метрики).
  - Записи (`ExerciseRecord`, `MetricRecord`) также привязаны к пользователю.

- Записи упражнений — плоский список:
  - Не вводим сущность Workout. Добавляем подходы/записи упражнений как плоский список, группировка по дате.
  - Тип записи упражнения поддерживает два варианта:
    - REPS: содержит `repsAmount` (целое).
    - TIME: содержит `durationMs` (миллисекунды).
  - Общие поля записи: `date` (момент выполнения), опциональные `note`, `weight`, `rpe`, `restSec`. Поле `weight` не обязательно для TIME-упражнений.

- Даты/время:
  - В API используем только ISO 8601 строки (например, `2025-11-10T10:00:00Z`).
  - Таймзона фиксирована: UTC.
  - В фильтрах `timeFrom`/`timeTo` формат `hh:mm:ss`, интерпретация — в UTC.

- Фильтры и пагинация:
  - Фильтры во всех list-эндпойнтах опциональны (`dateFrom`, `dateTo`, `timeFrom`, `timeTo`, плюс специфичные для ресурсов).
  - Пагинация: `page` (начиная с 1), `pageSize`. 
  - Ответ содержит `total`, `page`, `pageSize`.

- Сортировки:
  - Сортировка реализуется на бэкенде. Поддерживаем `sortBy: 'date' | 'name'`, `sortOrder: 'asc' | 'desc'`.
  - Значения по умолчанию: `sortBy = 'date'`, `sortOrder = 'desc'`.

- Нейминги и единицы:
  - Единицы измерения для метрик: используем список популярных (`kg`, `lb`, `cm`, `mm`, `percent`, `bpm`, `kcal`, `count`) с возможностью указать кастомное значение.
  - Исправляем опечатки в типах и ответах: `Exercise`, `Response`, и т.п. (единый нейминг).

- Общие типы (Shared):
  - Выделяем общий пакет/папку с экспортируемыми типами (`Muscles`, `PaginationRequestData`, `PaginationResponseData`, `ISODateString`, базовые интерфейсы).
  - Рекомендуем монорепо-структуру: `apps/mobile`, `apps/backend`, `packages/shared`.

## Открытые вопросы (для фиксации в дальнейшем)
- Набор дефолтных единиц измерения и валидация пользовательских единиц.
- Детали локализации/языков и форматирования дат на фронтенде при фиксированной UTC внутри API.


##Общие компоненты:

### DateRange
Предстваляет из себя два (date from и date to) input type=date (нативный для мобильных устройств и mui DatePicker для десктопов) И стрелки навигации вперед и назад. Компонент позволяет выбрать диапазон дат и предоставляет навигации по сооствествущим диапазонам (вперед назад)